<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPS</title>
</head>

<body>
    <script>
        function getComputerChoice (){
            let randNum = Math.floor((Math.random() * 3));
            let compChoice;

            switch (randNum){
                case 0:
                    compChoice = "rock";
                    break;

                case 1:
                    compChoice = "paper";
                    break;

                case 2:
                    compChoice = "scissors";
                    break;
            }

            return compChoice;
        }

        function playRound (playerSelection, computerSelection){
            playerSelection = playerSelection.toLowerCase();
            let playerWon;

            if(playerSelection === "rock"){
                if(computerSelection === "scissors") playerWon = true;
                if(computerSelection === "paper") playerWon = false;
            } 
            else if (playerSelection === "paper"){
                if(computerSelection === "rock") playerWon = true;
                if(computerSelection === "scissors") playerWon = false;
            }
            else {
                if(computerSelection === "paper") playerWon = true;
                if(computerSelection === "rock") playerWon = false;
            }
            
            computerSelection = computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1);
            playerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1);


            if(playerWon === false){
                resultText = `You Lose! ${computerSelection} beats ${playerSelection}`;
            }
            else if (playerWon === true){
                resultText = `You Win! ${playerSelection} beats ${computerSelection}`;
            }
            else{
                resultText = `It's a Tie!`;
            }

            return resultText;
        }

        function validInput(input){
            return input === "rock" || input === "paper" || input === "scissors";
        }

        function getUserMove(){
            let stopPrompting = false;
            let userInput;
            do{
                userInput = prompt("What is your move?").toLowerCase();
                stopPrompting = validInput(userInput) || false;
                if(!stopPrompting) alert("Wrong input");
            }while (!stopPrompting);

            return userInput;
        }

        let playerWins = 0;
        let computerWins = 0;

        function addWinnerPoint(resultText){
            if(resultText.includes("Lose")) computerWins++;
            if(resultText.includes("Win")) playerWins++;
        }

        function game (){

            for(let i = 0; i < 5; i++){
                let resultText = playRound(getUserMove(), getComputerChoice());
                console.log(resultText);

                addWinnerPoint(resultText);
            }

            if(computerWins + playerWins == 5){
                if(playerWins > computerWins){
                    console.log(`Humanity wins ${playerWins}:${computerWins}!`);
                }
                else{
                    console.log(`Humanity lost ${computerWins}:${playerWins}`);
                }
            }
            else{
                if(playerWins == computerWins){
                    console.log(`Humans and computers are equals`);
                }
                else if(playerWins > computerWins){
                    console.log(`Humanity wins ${playerWins}:${computerWins}, but made ${5 - computerWins - playerWins} ties`);
                }
                else if(computerWins > playerWins){
                    console.log(`Humanity lost ${computerWins}:${playerWins}, but made ${5 - computerWins - playerWins} ties`);
                }
            }
        }

        game();
    </script>
</body>
</html>