<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css"/> 
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">

    <title>RPS</title>
</head>

<body>
    <div class="page-content">
        <div class="health">
            <div class="health-background">
                <progress class="health-bar" max="3" value="2">
                    <span class="remaining-health">155as</span>
                </progress>
            </div>

            <div class="health-background">
                <progress class="health-bar" max="3" value="2">
                    <span class="remaining-health">155as</span>
                </progress>
            </div>
             
        </div>
        
        <div class="game-window">
            <div class="photo"><img src="./photos/jason-leung-1DjbGRDh7-E-unsplash-removebg-preview.png" alt="WALL-E made out of lego bricks"></div>

            <div id="middle-info">

                <div class="result-text">
                    <span id="result">Choose your weapon</span>
                </div>

                <div id="buttons">
                    <button data-move = "rock">Rock</button>
                    <button data-move = "papper">Papper</button>
                    <button data-move = "scissors">Scissors</button> 
                </div>
            </div>

            <div class="photo"><img src="./photos/austris-augusts-vhnljj9RkV8-unsplash-removebg-preview (1).png" alt="lego Superman"></div>
        </div>
    </div>
    

    <script>
        const chooseMoveButton = document.getElementsByTagName("button");

        Array.from(chooseMoveButton).forEach(button => {
            button.addEventListener("click", (e) => {
                const playerMove = e.target.getAttribute("data-move")
                const computerMove = getComputerMove();

                button.classList.add("clicking");
                button.addEventListener("transitionend", (e) => {
                    button.classList.remove("clicking");
                })

                const resultDiv = document.getElementById("result");
                const result = playRound(playerMove, computerMove);
                resultDiv.textContent = result;
            });
        });

        function playRound (playerMove, computerMove){
            let playerWon;

            if(playerMove === "rock"){
                if(computerMove === "scissors") playerWon = true;
                if(computerMove === "paper") playerWon = false;
            } 
            else if (playerMove === "paper"){
                if(computerMove === "rock") playerWon = true;
                if(computerMove === "scissors") playerWon = false;
            }
            else {
                if(computerMove === "paper") playerWon = true;
                if(computerMove === "rock") playerWon = false;
            }

            computerMove = computerMove.charAt(0).toUpperCase() + computerMove.slice(1);
            playerMove = playerMove.charAt(0).toUpperCase() + playerMove.slice(1);


            if(playerWon === false){
                resultText = `You Lose! ${computerMove} beats ${playerMove}`;
            }
            else if (playerWon === true){
                resultText = `You Win! ${playerMove} beats ${computerMove}`;
            }
            else{
                resultText = `It's a Tie!`;
            }

            return resultText;
        }

        function getComputerMove (){
            let randNum = Math.floor((Math.random() * 3));
            let compChoice;

            switch (randNum){
                case 0:
                    compChoice = "rock";
                    break;

                case 1:
                    compChoice = "paper";
                    break;

                case 2:
                    compChoice = "scissors";
                    break;
            }

            return compChoice;
        }
    </script>
</body>
</html>